/*
* jQuery Facebook - plugin to assist with the developement
* of Facebook applications using the Facebook JS SDK.
*
* Copyright (c) 2011-2012 Navkaran Garcha <nav_garcha@hotmail.co.uk>
*
* Licensed under the MIT license:
*   http://www.opensource.org/licenses/mit-license.php
*
* Version: 0.1
* Dependencies: jQuery
* Usage: jQuery.facebook( fbAppId [, settings] )
*
*/
(function(h,i,j,e){var f,d,g,c,k;h.facebook=function(q,p){if(!q||g){return}c=i.top!=i;f=h.extend({},h.facebook.settings,p);k=h(f.eventTarget);m(function(){o(h.extend(f.initConfig,{appId:q}))});return true};h.facebook.settings={staticPageSize:false,eventTarget:j,userLogged:e,initQueue:[],initConfig:{status:true,cookie:true,xfbml:true},onLogout:function(){i.location.reload()},onLogin:function(){i.location.reload()}};function m(p){h("body").append('<div id="fb-root" />');h.getScript("//connect.facebook.net/en_US/all.js",p)}function o(p){FB.init(p);FB.Canvas.scrollTo(0,0);FB.getLoginStatus(l);if(!f.staticPageSize){FB.Canvas.setAutoGrow()}g=true;a();n();b();k.trigger("ready.facebook")}function n(){while(f.initQueue.length){var p=f.initQueue.shift();if(typeof p==="function"){p()}}k.trigger("clearqueue.facebook")}function a(){FB.Event.subscribe("auth.statusChange",l);if(f.userLogged!==e){k.bind("userlogout.facebook",f.onLogout);k.bind("userlogin.facebook",f.onLogin)}}function l(p){d=!!p.authResponse;if(f.userLogged!==e){if(!d&&f.userLogged){k.trigger("userlogout.facebook")}else{if(d&&!f.userLogged){k.trigger("userlogin.facebook")}}}}function b(){h.extend(h.facebook,{inCanvas:c,isReady:g,ensure:function(q,p){if(!g||(p&&!d)){setTimeout(function(){h.facebook.ensure(q,p)},100)}else{if(q){q()}}},context:function(p,q){if(c&&typeof p==="function"){p()}else{if(!c&&typeof q==="function"){q()}}}})}})(jQuery,window,document);