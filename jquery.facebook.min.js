/*
* jQuery Facebook - plugin to assist with the developement
* of Facebook applications using the Facebook JS SDK.
*
* Copyright (c) 2011-2012 Navkaran Garcha <nav_garcha@hotmail.co.uk>
*
* Licensed under the MIT license:
*   http://www.opensource.org/licenses/mit-license.php
*
* Version: 0.1
* Dependencies: jQuery
* Usage: jQuery.facebook( fbAppId [, settings] )
*
*/
(function(e,h,m,g){var a,p,n,d,i;e.facebook=function(t,s){if(!t||n){return}d=h.top!=h;a=e.extend({},e.facebook.settings,s);i=e(a.eventTarget);j(function(){r(e.extend(a.initConfig,{appId:t}))});return true};e.facebook.settings={staticPageSize:false,eventTarget:m,userLogged:g,initQueue:[],initConfig:{status:true,cookie:true,xfbml:true},onLogout:function(){h.location.reload()},onLogin:function(){h.location.reload()}};function j(s){e("body").append('<div id="fb-root" />');e.getScript("//connect.facebook.net/en_US/all.js",s);b()}function r(s){FB.init(s);FB.Canvas.scrollTo(0,0);FB.getLoginStatus(l);if(!a.staticPageSize){FB.Canvas.setAutoGrow()}n=true;o();k();f();i.trigger("ready.facebook")}function k(){while(a.initQueue.length){var s=a.initQueue.shift();if(typeof s==="function"){s()}}i.trigger("clearqueue.facebook")}function o(){FB.Event.subscribe("auth.statusChange",l);if(a.userLogged!==g){i.bind("userlogout.facebook",a.onLogout);i.bind("userlogin.facebook",a.onLogin)}}function l(s){p=!!s.authResponse;if(a.userLogged!==g){if(!p&&a.userLogged){i.trigger("userlogout.facebook")}else{if(p&&!a.userLogged){i.trigger("userlogin.facebook")}}}}function q(t,s){if(!n||(s&&!p)){setTimeout(function(){e.facebook.ensure(t,s)},100)}else{if(t){t()}}}function c(s,t){if(d&&typeof s==="function"){s()}else{if(!d&&typeof t==="function"){t()}}}function b(){if(d){e("a[href]").not("[target=_top]").each(function(s,t){if(t.href[0]!="/"){e(t).attr("target","_top")}})}}function f(){e.extend(e.facebook,{inCanvas:d,isReady:n,ensure:q,context:c})}})(jQuery,window,document);